{% extends 'base.html' %} {% block content %}
<script type="text/javascript" src="http://eduvyerp.co.in/eduvy/assets/multiselect/dist/js/bootstrap-multiselect.js"></script>

<link rel="stylesheet" href="http://eduvyerp.co.in/eduvy/assets/multiselect/dist/css/bootstrap-multiselect.css" type="text/css">
<script type="text/javascript">
    $(document).ready(function() {
        $('#example-enableCaseInsensitiveFiltering').multiselect({
            enableCaseInsensitiveFiltering: true,
            includeSelectAllOption: true
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#example-enableCaseInsensitiveFiltering2').multiselect({
            enableCaseInsensitiveFiltering: true,
            includeSelectAllOption: true
        });
    });
</script>
<div class="page-inner">
    <div class="page-title mb-15">
        <div class="pull-left">
            <h3 class="breadcrumb-header">User Groups</h3>
            <p class="text-muted mb-0">User Groups under Eduvy</p>
        </div>
        <div class="pull-right">
            <div class="btn-group mx-auto">
                <ol class="breadcrumb hide-phone pt-4 pb-4 m-0">
                    <li class="breadcrumb-item"><a href="#">Eduvy</a></li>
                    <li class="breadcrumb-item"><a href="#">User Groups</a></li>
                    <li class="breadcrumb-item active">User Groups</li>
                </ol>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    <div id="main-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <div class="panel mb-0">
                    <div class="panel-body">
                        <h4 class="mt-0 header-title"></h4>
                        <!--<p class="text-muted mb-30 font-15">Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient monte.</p>-->
                        <div class="row data-filter" style="padding-top:50px;">
                            <div class="col-md-1">
                            </div>
                            <form method="post" action="">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="search" id="searchput" name="search" placeholder="Search..." class="form-control">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <button name="searchbutt" id="searchbut" class="btn btn-warning form-control">Search</button>
                                    </div>
                                </div>
                            </form>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <button name="addnew" class="btn btn-success form-control btn-add">Add <b
											class="fa fa-plus"></b></button>
                                </div>
                            </div>
                        </div>
                        <style>
                            strong {
                                position: relative !important;
                                top: 5px !important;
                            }
                            
                            .btn-group>.btn:first-child {
                                width: 100% !important;
                            }
                            
                            .btn-group {
                                width: 100% !important;
                            }
                            
                            td {
                                vertical-align: inherit !important;
                            }
                            
                            .eduvy-img-listview {
                                max-width: 70px;
                                max-height: 70px;
                            }
                            
                            .dropdown-menu {
                                width: 100% !important;
                                max-height: 200px !important;
                                overflow-y: scroll !important;
                                overflow-x: hidden !important;
                            }
                            
                            .page-item {
                                margin-left: 15px !important;
                            }
                        </style>
                        <div>
                            <table class="table table-striped table-responsive data-list">
                                <thead>
                                    <tr>
                                        <th scope="col">User Group</th>
                                        <th scope="col">Permissions</th>
                                        <th scope="col">Status</th>
                                        <th scope="col">Added on</th>
                                        <th scope="col">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {% for i in user_group %}
                                    <tr>
                                        <td scope="row">{{i.name}}</td>
                                        <td>{{ i.permissions}}</td>
                                        <td>Active</td>
                                        <td>2021-04-02</td>
                                        <td>
                                            <span style="cursor:pointer;font-size:1em;" class="fa fa-pencil edit-column" id="1">
											</span>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            <style>
                                .multiselect-native-select .btn-group {
                                    width: 100% !important;
                                }
                                
                                .multiselect-native-select .btn-group button {
                                    width: 100% !important;
                                }
                            </style>
                            <div class="row data-add" style="padding-top:50px;display:none">
                                <form method="post" enctype="multipart/form-data" action="user_group">
                                    <div class="col-lg-12">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>User Group Name</label>
                                                <input type="text" class="form-control" name="name" placeholder="User Group Name" required="">
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>Permissions</label>
                                                <span class="multiselect-native-select">
													<select name="permissions[]"
														id="example-enableCaseInsensitiveFiltering" class="form-control"
														multiple="">
														{% for  i in permission %}
															<option value="{{i.id}}">{{i.name}}</option>
														{% endfor %}
													</select>
												</span>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>Status</label>
                                                <select class="form-control" name="status">
													<option value="Active">Active</option>
													<option value="Inactive">Inactive</option>
												</select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12" style="padding-top:50px;">
                                        <div class="col-lg-6 text-right"><button class="btn btn-success">Submit</button>
                                        </div>
                                        <div class="col-lg-6 text-left"><button type="button" class="btn btn-danger btn-close">Close</button></div>
                                    </div>
                                </form>
                            </div>

                            <div class="row data-update" style="padding-top:50px;display:none">
                                <form method="post" enctype="multipart/form-data" action="http://eduvyerp.co.in/eduvy/admin/user_group/update_user_group">
                                    <div class="col-lg-12">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>User Group Name</label>
                                                <input type="text" class="form-control user_group_name" name="name" placeholder="User Group Name" required="">
                                                <input type="text" name="_id" class="user_group_id" hidden="" style="display:none">
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group permissions_list">

                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label>Status</label>
                                                <select class="form-control status" name="status">
													<option value="Active">Active</option>
													<option value="Inactive">Inactive</option>
												</select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12" style="padding-top:50px;">
                                        <div class="col-lg-6 text-right"><button class="btn btn-success">Submit</button>
                                        </div>
                                        <div class="col-lg-6 text-left"><button type="button" class="btn btn-danger btn-close">Close</button></div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page-footer">
        <!--<p>&copy; 2019 Fadmin - Crafted with <i class="mdi mdi-heart text-danger"></i> by ThemesBoss.</p>-->
    </div>
</div>
<script>
    $(document).ready(function() {

        $(".btn-add").click(function() {

            $(".data-list").hide();
            $(".data-filter").hide();
            $(".data-add").show();
            $(".header-title").html("Add User Group");

        });

        $(".btn-close").click(function() {

            $(".data-list").show();
            $(".data-filter").show();
            $(".data-add").hide();
            $(".data-update").hide();
            $(".header-title").html("");

        });

        $(".edit-column").click(function() {
            var id = $(this).attr("id");

            if (id) {
                $.ajax({
                    type: 'POST',
                    dataType: 'json',
                    url: 'http://eduvyerp.co.in/eduvy/admin/user_group/get_single_user_group',
                    data: {
                        _id: id
                    },
                    success: function(html) {
                        $(".data-list").hide();
                        $(".data-filter").hide();
                        $(".data-update").show();
                        $(".header-title").html("Edit User Group");

                        $(".user_group_name").val(html.name);
                        $(".user_group_id").val(html._id);
                        $(".permissions_list").html(html.permissions);
                        $(".status").val(html.status);

                        $('#example-enableCaseInsensitiveFiltering2').multiselect({
                            enableCaseInsensitiveFiltering: true,
                            includeSelectAllOption: true
                        });
                    }
                });
            } else {
                alert("Something wrong please try after some time !");
            }
        });

        $(".delete-column").click(function() {
            var id = $(this).attr("id");

            if (confirm("Are you sure ? You want to delete this ?")) {
                $.ajax({
                    type: 'POST',
                    url: 'http://eduvyerp.co.in/eduvy/admin/user_group/delete_user_group',
                    data: {
                        _id: id
                    },
                    success: function(html) {
                        window.location.reload();
                    }
                });
            } else {
                alert("Something wrong please try after some time !");
            }
        });
    });
</script>
<script>
    $(document).ready(function() {
        $('#multiple-checkboxes').multiselect({
            includeSelectAllOption: true,
            enableCaseInsensitiveFiltering: true,
        });
    })
</script>
{% endblock %}